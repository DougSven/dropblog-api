

package com.dougsvendsen.dropblog.resources

import static com.yammer.dropwizard.testing.JsonHelpers.*
import spock.lang.Shared
import spock.lang.Specification
import spock.lang.Unroll

import com.dougsvendsen.dropblog.core.Post

@Unroll
class PostSpec extends Specification {

	@Shared
	def simplePost = new Post( id: 1, 
		title: "Simple Post",
		content: "This is some content",
	    createDate: new Date(2),
	    updateDate: new Date(2))

	@Shared
	def longPost = new Post ( "id": 1,
		title: "Long Post",
		createDate: new Date(2),
		updateDate: new Date(2),
		content: "content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content content content    content content content content content content content content content content content content content content content    content content content content content content content    content content content content    content content content content content content content content content content content content content content content content content content    content content content content content content content content content content    content content content content content content content content content content content content content"
		)
	
	def "#post.title can be serialized to JSON #fixture"() {
		expect:
		asJson(post) == jsonFixture(fixture)
			
		where:
		post 	     || fixture
		simplePost   || "fixtures/simplePost.json"
		longPost     || "fixtures/longPost.json"
	}
	
	def "#post.title can be deserialized from JSON #fixture"(){
		expect:
		fromJson(jsonFixture(fixture), Post.class) == post
			
		where:
		post 	     || fixture
		simplePost   || "fixtures/simplePost.json"
		longPost     || "fixtures/longPost.json"
		
		
	}
	
}
